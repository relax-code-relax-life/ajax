/*! https://gitee.com/w-wl */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ajax=t():e.ajax=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){function t(e,t,n){window[c]=j.onload=j.onerror=null,p&&clearTimeout(p);try{m.removeChild(j)}catch(e){}l||(200===e?v.resolve:v.reject)({status:e,statusText:t,data:n})}var n=e||{},r=n.url,o=void 0===r?"":r,u=n.params,a=void 0===u?{}:u,i=n.cbParam,c=n.cbName,s=n.timeout,f=n.charset,d=void 0===f?"utf-8":f,l=!1;!s&&(s=3e4),!i&&(i="callback"),!c&&(c="__jsonp__"+E++),a[i]=c,o=y(o,a,e.encodeExclude);var p,m=document.body||document.head,j=document.createElement("script"),v=b();return p=setTimeout(function(){p=void 0,t(400,"timeout")},s),window[c]=function(e){t(200,"ok",e)},j.onload=function(){},j.onerror=function(){t(404,"error")},j.charset=d,j.src=o,m.appendChild(j),v.abort=function(){l=!0},v}function o(e){var t=b(),n=new XMLHttpRequest,r=e.url,o=e.method,u=e.params,a=e.data,i=e.responseType;return n.open(o,y(r,u,e.encodeExclude),!0),n.timeout=e.timeout||0,n.onreadystatechange=function(){if(n&&4===n.readyState){var e=n.responseType&&"text"!==n.responseType?n.response:n.responseText;if("json"===i&&!l(e))try{e=JSON.parse(e)}catch(e){}var r=n.status,o={data:e,status:1223===r?204:n.status,statusText:1223===r?"No Content":n.statusText,xhr:n};r>=200&&r<300?t.resolve(o):t.reject(o),n=null}},n.ontimeout=function(){t.reject(w("timeout",n)),n=null},n.setRequestHeader&&f(e.headers,function(e,t){null!==e&&void 0!==e&&n.setRequestHeader(t,e)}),n.withCredentials=e.withCredentials,n.responseType=i||"",n.send(a||null),t.abort=function(){n&&n.abort()},t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Function.prototype.call,i=a.bind(Object.prototype.toString),c=/(\?([^#]*))?(#.*)?\s*$/,s=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.filter(function(e){return void 0!=e}).forEach(function(t,n){Object.keys(t).filter(function(e){return null!=t[e]}).forEach(function(n){return e[n]=t[n]})}),e},f=function(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})},d=Array.isArray||function(e){return"[object Array]"===i(e)},l=function(e){return e&&"object"===(void 0===e?"undefined":u(e))},p=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},m=function(e,t){if(null==e||"object"!==(void 0===e?"undefined":u(e)))return e||"";var n,r=[],o=encodeURIComponent,a={},i=!1;d(t)?t.forEach(function(e){a[e]=!0}):i=t;for(var c in e)n=e[c],null==n?n="":"object"===(void 0===n?"undefined":u(n))&&(n=JSON.stringify(n)),n=i||a[c]?n:o(n),r.push(o(c)+"="+n);return r.join("&")},y=function(e,t,n){return t=m(t,n),e.replace(c,"?$2&"+t+"$3").replace("?&","?")},b=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},j=function(e){return"undefined"!=typeof FormData&&e instanceof FormData},v=function(e){return"[object ArrayBuffer]"===i(e)},h=function(e){return"[object File]"===i(e)},x=function(e){return"[object Blob]"===i(e)},T=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},w=function(e,t){return{message:e,status:t.status,statusText:t.statusText,data:t.responseText,xhr:t}},E=0,S={method:"GET",headers:{Accept:"application/json, text/plain, */*"},transformRequest:function(e,t){return e},transformResponse:function(e,t){return e},encodeExclude:!1,responseType:"json"},g={"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},A={"Content-Type":"application/json;charset=utf-8"},O={},C={urlencoded:"urlencoded",formData:"formdata",json:"json"},R=function(e){if("string"!=typeof e.url||""===p(e.url))throw"wwl-ajax : invalid url .";e=s({},S,e);var t=e.method.toUpperCase(),n=e.transformRequest,a=e.transformResponse,i=n(e.data,e)||{},c=e.params||{},d="JSONP"===t;("GET"===t||d)&&(s(c,i),i=null);var l=s({},O[t]),y=e.contentType;if(j(i))y=C.formData;else if("object"!==(void 0===i?"undefined":u(i))||v(i)||T(i)||x(i)||h(i));else if(y===C.formData){var b=new FormData;f(i,function(e,t){b.append(t,e)}),i=b}else y===C.json?(i=JSON.stringify(i),s(l,A)):y&&y!==C.urlencoded||(i=m(i,e.encodeExclude),y=C.urlencoded,s(l,g));var w=s(l,e.headers);e.method=t,e.params=c,e.data=i,e.headers=w;var E=d?r(e):o(e),R=E.promise.then(function(t){return t.data=a(t.data,e),t},function(t){return t.data=a(t.data,e),Promise.reject(t)});return R.abort=E.abort,R};e.exports=R}])});